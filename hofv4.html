<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Hall of Fame Explorer</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(to bottom right, #f8fafc, #dbeafe);
            min-height: 100vh;
            padding: 1rem;
        }
        #root { max-width: 1600px; margin: 0 auto; }
        .chart-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 1.5rem;
        }
        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .filters-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .filters-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: flex-end;
        }
        .tab-container {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tab-button:hover {
            color: #3b82f6;
        }
        .tab-button.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .table-container {
            overflow-x: auto;
            margin-top: 1rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }
        thead {
            background: #f9fafb;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        th {
            padding: 0.75rem 0.5rem;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
        }
        th:hover {
            background: #f3f4f6;
        }
        th .sort-indicator {
            display: inline-block;
            margin-left: 0.25rem;
            color: #3b82f6;
            font-size: 0.75rem;
        }
        td {
            padding: 0.75rem 0.5rem;
            border-bottom: 1px solid #e5e7eb;
            color: #1f2937;
        }
        td.sorted-column {
            background: #f3f4f6;
        }
        tr:hover {
            background: #f9fafb;
        }
        tr:hover td.sorted-column {
            background: #e5e7eb;
        }
        .table-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        h1 {
            font-size: 1.75rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            font-size: 0.875rem;
            font-weight: 600;
            color: #4b5563;
        }
        .filter-box {
            display: flex;
            flex-direction: column;
        }
        .filter-box label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.375rem;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        .filter-box select {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            min-width: 160px;
            cursor: pointer;
            background-color: white;
        }
        .filter-box select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .filter-box select:disabled {
            background-color: #f3f4f6;
            cursor: not-allowed;
            opacity: 0.6;
        }
        .debut-filter {
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
        }
        .debut-filter select {
            min-width: 60px;
        }
        .debut-filter input {
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            width: 100px;
        }
        .debut-filter input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .reset-button {
            padding: 0.5rem 1.5rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            align-self: flex-end;
        }
        .reset-button:hover {
            background: #dc2626;
        }
        .reset-button:active {
            background: #b91c1c;
        }
        .player-count {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 1rem;
            font-weight: 500;
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        .pagination-button {
            padding: 0.5rem 0.75rem;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s;
        }
        .pagination-button:hover:not(:disabled) {
            background: #f3f4f6;
            border-color: #9ca3af;
        }
        .pagination-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .pagination-button.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        .pagination-info {
            font-size: 0.875rem;
            color: #6b7280;
            padding: 0 0.5rem;
        }
        .chart-wrapper { 
            position: relative; 
            overflow-x: auto;
            overflow-y: visible;
        }
        .chart-scroll {
            min-width: 900px;
        }
        svg { display: block; margin: 0 auto; }
        .tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 10;
            max-width: 250px;
        }
        .tooltip-name { font-weight: bold; margin-bottom: 0.5rem; font-size: 1rem; }
        .tooltip-section { margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #374151; }
        .source {
            position: absolute;
            font-size: 11px;
            color: #6b7280;
            bottom: 10px;
            left: 60px;
        }
        .cursor-pointer { cursor: pointer; }
        .loading { text-align: center; padding: 2rem; color: #6b7280; font-size: 1.1rem; }
        @media (max-width: 1024px) {
            body { padding: 0.5rem; }
            .chart-container { padding: 1rem; }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function HOFExplorer() {
            const [allHitters, setAllHitters] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [hoveredPlayer, setHoveredPlayer] = useState(null);
            const [mousePos, setMousePos] = useState({ x: 0, y: 0 });
            const [activeTab, setActiveTab] = useState('chart');
            const [selectedTeam, setSelectedTeam] = useState('All Teams');
            const [selectedPosition, setSelectedPosition] = useState('All Positions');
            const [xStat, setXStat] = useState('oWAR');
            const [yStat, setYStat] = useState('dWAR');
            const [bubbleStat, setBubbleStat] = useState('WAR');
            const [debutOperator, setDebutOperator] = useState('>');
            const [debutYear, setDebutYear] = useState('');
            const [sortColumn, setSortColumn] = useState('WAR');
            const [sortDirection, setSortDirection] = useState('desc');
            const [tableTeamFilter, setTableTeamFilter] = useState('All Teams');
            const [tablePositionFilter, setTablePositionFilter] = useState('All Positions');
            const [currentPage, setCurrentPage] = useState(1);
            const playersPerPage = 25;

            useEffect(() => {
                const loadData = async () => {
                    try {
                        const sheetId = '15kTGoq3cSPRxmqVA3uGDZhM0VCmTt79p2V1p3LiVZUY';
                        const gid = '0';
                        const csvUrl = `https://docs.google.com/spreadsheets/d/${sheetId}/export?format=csv&gid=${gid}`;
                        
                        const response = await fetch(csvUrl);
                        const csvText = await response.text();
                        
                        const lines = csvText.split('\n').filter(line => line.trim());
                        const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
                        
                        const jsonData = [];
                        for (let i = 1; i < lines.length; i++) {
                            const line = lines[i];
                            const values = [];
                            let current = '';
                            let inQuotes = false;
                            
                            for (let char of line) {
                                if (char === '"') {
                                    inQuotes = !inQuotes;
                                } else if (char === ',' && !inQuotes) {
                                    values.push(current.trim().replace(/^"|"$/g, ''));
                                    current = '';
                                } else {
                                    current += char;
                                }
                            }
                            values.push(current.trim().replace(/^"|"$/g, ''));
                            
                            const exclude = values[32];
                            if (exclude && exclude.toLowerCase() === 'exclude') {
                                continue;
                            }
                            
                            if (values.length >= 32 && values[1]) {
                                const row = {
                                    Player: values[1],
                                    WAR: parseFloat(values[2]),
                                    DebutYear: parseInt(values[3]),
                                    To: parseInt(values[4]),
                                    G: parseFloat(values[5]),
                                    PA: parseFloat(values[6]),
                                    AB: parseFloat(values[7]),
                                    R: parseFloat(values[8]),
                                    H: parseFloat(values[9]),
                                    '1B': parseFloat(values[10]),
                                    '2B': parseFloat(values[11]),
                                    '3B': parseFloat(values[12]),
                                    HR: parseFloat(values[13]),
                                    'HR%': parseFloat(values[14]),
                                    RBI: parseFloat(values[15]),
                                    SB: parseFloat(values[16]),
                                    CS: parseFloat(values[17]),
                                    'SB%': parseFloat(values[18]),
                                    BB: parseFloat(values[19]),
                                    'BB%': parseFloat(values[20]),
                                    SO: parseFloat(values[21]),
                                    'SO%': parseFloat(values[22]),
                                    BA: parseFloat(values[23]),
                                    OBP: parseFloat(values[24]),
                                    SLG: parseFloat(values[25]),
                                    OPS: parseFloat(values[26]),
                                    'OPS+': parseFloat(values[27]),
                                    TB: parseFloat(values[28]),
                                    WAA: parseFloat(values[29]),
                                    oWAR: parseFloat(values[30]),
                                    dWAR: parseFloat(values[31]),
                                    Position: values[33],
                                    Team: values[34]
                                };
                                
                                if (row.Player && !isNaN(row.WAR)) {
                                    jsonData.push(row);
                                }
                            }
                        }
                        
                        setAllHitters(jsonData);
                        console.log('Loaded', jsonData.length, 'hitters');
                        setLoading(false);
                    } catch (err) {
                        console.error('Error loading data:', err);
                        setError(err.message);
                        setLoading(false);
                    }
                };
                loadData();
            }, []);

            if (loading) return <div className="loading">Loading Hall of Fame data...</div>;
            if (error) return <div className="loading">Error: {error}</div>;
            if (allHitters.length === 0) return <div className="loading">No data available</div>;

            const hitterStats = {
                'WAR': 'WAR',
                'G': 'Games',
                'PA': 'Plate Appearances',
                'AB': 'At Bats',
                'R': 'Runs',
                'H': 'Hits',
                '1B': 'Singles',
                '2B': 'Doubles',
                '3B': 'Triples',
                'HR': 'Home Runs',
                'HR%': 'HR%',
                'RBI': 'RBI',
                'SB': 'Stolen Bases',
                'CS': 'Caught Stealing',
                'SB%': 'SB%',
                'BB': 'Walks',
                'BB%': 'BB%',
                'SO': 'Strikeouts',
                'SO%': 'SO%',
                'BA': 'Batting Average',
                'OBP': 'On-Base %',
                'SLG': 'Slugging %',
                'OPS': 'OPS',
                'OPS+': 'OPS+',
                'TB': 'Total Bases',
                'WAA': 'WAA',
                'oWAR': 'Offensive WAR',
                'dWAR': 'Defensive WAR'
            };

            const teams = ['All Teams'];
            const teamSet = new Set();
            allHitters.forEach(p => {
                if (p.Team) {
                    const playerTeams = p.Team.split(',').map(t => t.trim());
                    playerTeams.forEach(t => teamSet.add(t));
                }
            });
            const sortedTeams = [...teamSet].sort();
            teams.push(...sortedTeams);

            const positions = ['All Positions', 'C', '1B', '2B', 'SS', '3B', 'LF', 'CF', 'RF', 'OF', 'DH'];

            const resetFilters = () => {
                setSelectedTeam('All Teams');
                setSelectedPosition('All Positions');
                setXStat('oWAR');
                setYStat('dWAR');
                setBubbleStat('WAR');
                setDebutOperator('>');
                setDebutYear('');
            };

            const handleSort = (column) => {
                if (sortColumn === column) {
                    setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');
                } else {
                    setSortColumn(column);
                    setSortDirection('desc');
                }
                setCurrentPage(1); // Reset to first page when sorting changes
            };

            const formatValue = (val) => {
                if (isNaN(val)) return 'N/A';
                if (val >= 1000) return val.toLocaleString();
                if (val < 1 && val > 0) return val.toFixed(3);
                return val.toFixed(1);
            };

            const formatTableValue = (val, column) => {
                if (isNaN(val)) return 'N/A';
                // Whole numbers for these columns
                const wholeNumberColumns = ['G', 'AB', 'R', 'H', '2B', '3B', 'HR', 'RBI', 'SB', 'BB', 'SO', 'OPS+'];
                if (wholeNumberColumns.includes(column)) {
                    return Math.round(val).toLocaleString();
                }
                // Standard formatting for others
                if (val >= 1000) return val.toLocaleString();
                if (val < 1 && val > 0) return val.toFixed(3);
                return val.toFixed(1);
            };

            if (activeTab === 'table') {
                let tableData = allHitters;
                
                if (tableTeamFilter !== 'All Teams') {
                    tableData = tableData.filter(p => {
                        if (!p.Team) return false;
                        const teams = p.Team.split(',').map(t => t.trim());
                        return teams.includes(tableTeamFilter);
                    });
                }
                
                if (tablePositionFilter !== 'All Positions') {
                    tableData = tableData.filter(p => {
                        if (!p.Position) return false;
                        const positions = p.Position.split(',').map(pos => pos.trim());
                        return positions.includes(tablePositionFilter);
                    });
                }

                const sortedData = [...tableData].sort((a, b) => {
                    let aVal = a[sortColumn];
                    let bVal = b[sortColumn];
                    
                    if (typeof aVal === 'string') {
                        aVal = aVal || '';
                        bVal = bVal || '';
                        return sortDirection === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
                    }
                    
                    aVal = isNaN(aVal) ? -Infinity : aVal;
                    bVal = isNaN(bVal) ? -Infinity : bVal;
                    return sortDirection === 'asc' ? aVal - bVal : bVal - aVal;
                });

                // Pagination calculations
                const totalPlayers = sortedData.length;
                const totalPages = Math.ceil(totalPlayers / playersPerPage);
                const startIndex = (currentPage - 1) * playersPerPage;
                const endIndex = startIndex + playersPerPage;
                const paginatedData = sortedData.slice(startIndex, endIndex);

                // Generate page numbers to show
                const getPageNumbers = () => {
                    const pages = [];
                    const maxPagesToShow = 7;
                    
                    if (totalPages <= maxPagesToShow) {
                        for (let i = 1; i <= totalPages; i++) {
                            pages.push(i);
                        }
                    } else {
                        if (currentPage <= 4) {
                            for (let i = 1; i <= 5; i++) pages.push(i);
                            pages.push('...');
                            pages.push(totalPages);
                        } else if (currentPage >= totalPages - 3) {
                            pages.push(1);
                            pages.push('...');
                            for (let i = totalPages - 4; i <= totalPages; i++) pages.push(i);
                        } else {
                            pages.push(1);
                            pages.push('...');
                            for (let i = currentPage - 1; i <= currentPage + 1; i++) pages.push(i);
                            pages.push('...');
                            pages.push(totalPages);
                        }
                    }
                    return pages;
                };

                const tableColumns = [
                    { key: 'Player', label: 'Player' },
                    { key: 'Team', label: 'Team' },
                    { key: 'Position', label: 'Position' },
                    { key: 'DebutYear', label: 'Debut Year' },
                    { key: 'WAR', label: 'WAR' },
                    { key: 'oWAR', label: 'oWAR' },
                    { key: 'dWAR', label: 'dWAR' },
                    { key: 'G', label: 'Games' },
                    { key: 'AB', label: 'At Bats' },
                    { key: 'R', label: 'R' },
                    { key: 'H', label: 'H' },
                    { key: '2B', label: '2B' },
                    { key: '3B', label: '3B' },
                    { key: 'HR', label: 'HR' },
                    { key: 'RBI', label: 'RBI' },
                    { key: 'SB', label: 'SB' },
                    { key: 'BB', label: 'BB' },
                    { key: 'SO', label: 'SO' },
                    { key: 'BA', label: 'BA' },
                    { key: 'OBP', label: 'OBP' },
                    { key: 'SLG', label: 'SLG' },
                    { key: 'OPS', label: 'OPS' },
                    { key: 'OPS+', label: 'OPS+' }
                ];

                return (
                    <div className="chart-container">
                        <div className="header-row">
                            <div>
                                <h1>Baseball Hall of Fame Explorer</h1>
                                <p className="subtitle">View stats for all HOF batters</p>
                            </div>
                        </div>

                        <div className="tab-container">
                            <button 
                                className={`tab-button ${activeTab === 'chart' ? 'active' : ''}`}
                                onClick={() => setActiveTab('chart')}
                            >
                                Chart View
                            </button>
                            <button 
                                className={`tab-button ${activeTab === 'table' ? 'active' : ''}`}
                                onClick={() => setActiveTab('table')}
                            >
                                Table View
                            </button>
                        </div>

                        <div className="table-filters">
                            <div className="filter-box">
                                <label>Team</label>
                                <select 
                                    value={tableTeamFilter} 
                                    onChange={(e) => { setTableTeamFilter(e.target.value); setCurrentPage(1); }}
                                    disabled={teams.length < 2}
                                >
                                    {teams.map(team => (
                                        <option key={team} value={team}>{team}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="filter-box">
                                <label>Position</label>
                                <select 
                                    value={tablePositionFilter} 
                                    onChange={(e) => { setTablePositionFilter(e.target.value); setCurrentPage(1); }}
                                    disabled={positions.length < 2}
                                >
                                    {positions.map(pos => (
                                        <option key={pos} value={pos}>{pos}</option>
                                    ))}
                                </select>
                            </div>
                        </div>

                        <p className="player-count">
                            Showing {startIndex + 1}-{Math.min(endIndex, totalPlayers)} of {totalPlayers} players
                        </p>

                        <div className="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        {tableColumns.map(col => (
                                            <th key={col.key} onClick={() => handleSort(col.key)}>
                                                {col.label}
                                                {sortColumn === col.key && (
                                                    <span className="sort-indicator">
                                                        {sortDirection === 'asc' ? '▲' : '▼'}
                                                    </span>
                                                )}
                                            </th>
                                        ))}
                                    </tr>
                                </thead>
                                <tbody>
                                    {paginatedData.map((player, i) => (
                                        <tr key={i}>
                                            <td className={sortColumn === 'Player' ? 'sorted-column' : ''}>{player.Player}</td>
                                            <td className={sortColumn === 'Team' ? 'sorted-column' : ''}>{player.Team || 'N/A'}</td>
                                            <td className={sortColumn === 'Position' ? 'sorted-column' : ''}>{player.Position || 'N/A'}</td>
                                            <td className={sortColumn === 'DebutYear' ? 'sorted-column' : ''}>{player.DebutYear}</td>
                                            <td className={sortColumn === 'WAR' ? 'sorted-column' : ''}>{formatTableValue(player.WAR, 'WAR')}</td>
                                            <td className={sortColumn === 'oWAR' ? 'sorted-column' : ''}>{formatTableValue(player.oWAR, 'oWAR')}</td>
                                            <td className={sortColumn === 'dWAR' ? 'sorted-column' : ''}>{formatTableValue(player.dWAR, 'dWAR')}</td>
                                            <td className={sortColumn === 'G' ? 'sorted-column' : ''}>{formatTableValue(player.G, 'G')}</td>
                                            <td className={sortColumn === 'AB' ? 'sorted-column' : ''}>{formatTableValue(player.AB, 'AB')}</td>
                                            <td className={sortColumn === 'R' ? 'sorted-column' : ''}>{formatTableValue(player.R, 'R')}</td>
                                            <td className={sortColumn === 'H' ? 'sorted-column' : ''}>{formatTableValue(player.H, 'H')}</td>
                                            <td className={sortColumn === '2B' ? 'sorted-column' : ''}>{formatTableValue(player['2B'], '2B')}</td>
                                            <td className={sortColumn === '3B' ? 'sorted-column' : ''}>{formatTableValue(player['3B'], '3B')}</td>
                                            <td className={sortColumn === 'HR' ? 'sorted-column' : ''}>{formatTableValue(player.HR, 'HR')}</td>
                                            <td className={sortColumn === 'RBI' ? 'sorted-column' : ''}>{formatTableValue(player.RBI, 'RBI')}</td>
                                            <td className={sortColumn === 'SB' ? 'sorted-column' : ''}>{formatTableValue(player.SB, 'SB')}</td>
                                            <td className={sortColumn === 'BB' ? 'sorted-column' : ''}>{formatTableValue(player.BB, 'BB')}</td>
                                            <td className={sortColumn === 'SO' ? 'sorted-column' : ''}>{formatTableValue(player.SO, 'SO')}</td>
                                            <td className={sortColumn === 'BA' ? 'sorted-column' : ''}>{formatTableValue(player.BA, 'BA')}</td>
                                            <td className={sortColumn === 'OBP' ? 'sorted-column' : ''}>{formatTableValue(player.OBP, 'OBP')}</td>
                                            <td className={sortColumn === 'SLG' ? 'sorted-column' : ''}>{formatTableValue(player.SLG, 'SLG')}</td>
                                            <td className={sortColumn === 'OPS' ? 'sorted-column' : ''}>{formatTableValue(player.OPS, 'OPS')}</td>
                                            <td className={sortColumn === 'OPS+' ? 'sorted-column' : ''}>{formatTableValue(player['OPS+'], 'OPS+')}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>

                        <div className="pagination">
                            <button 
                                className="pagination-button"
                                onClick={() => setCurrentPage(1)}
                                disabled={currentPage === 1}
                            >
                                First
                            </button>
                            <button 
                                className="pagination-button"
                                onClick={() => setCurrentPage(currentPage - 1)}
                                disabled={currentPage === 1}
                            >
                                Previous
                            </button>
                            
                            {getPageNumbers().map((page, idx) => (
                                page === '...' ? (
                                    <span key={`ellipsis-${idx}`} className="pagination-info">...</span>
                                ) : (
                                    <button
                                        key={page}
                                        className={`pagination-button ${currentPage === page ? 'active' : ''}`}
                                        onClick={() => setCurrentPage(page)}
                                    >
                                        {page}
                                    </button>
                                )
                            ))}
                            
                            <button 
                                className="pagination-button"
                                onClick={() => setCurrentPage(currentPage + 1)}
                                disabled={currentPage === totalPages}
                            >
                                Next
                            </button>
                            <button 
                                className="pagination-button"
                                onClick={() => setCurrentPage(totalPages)}
                                disabled={currentPage === totalPages}
                            >
                                Last
                            </button>
                        </div>
                    </div>
                );
            }

            // Chart View
            let data = allHitters;
            
            data = data.filter(p => {
                const xVal = p[xStat];
                const yVal = p[yStat];
                return xVal !== 0 && yVal !== 0 && !isNaN(xVal) && !isNaN(yVal);
            });
            
            if (selectedTeam !== 'All Teams') {
                data = data.filter(p => {
                    if (!p.Team) return false;
                    const teams = p.Team.split(',').map(t => t.trim());
                    return teams.includes(selectedTeam);
                });
            }
            
            if (selectedPosition !== 'All Positions') {
                data = data.filter(p => {
                    if (!p.Position) return false;
                    const positions = p.Position.split(',').map(pos => pos.trim());
                    return positions.includes(selectedPosition);
                });
            }

            if (debutYear) {
                const yearNum = parseInt(debutYear);
                if (!isNaN(yearNum)) {
                    data = data.filter(p => {
                        if (debutOperator === '>') return p.DebutYear > yearNum;
                        if (debutOperator === '<') return p.DebutYear < yearNum;
                        return p.DebutYear === yearNum;
                    });
                }
            }

            const width = 1000;
            const height = 600;
            const margin = { top: 40, right: 40, bottom: 60, left: 60 };
            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const xValues = data.map(d => d[xStat]).filter(v => !isNaN(v));
            const yValues = data.map(d => d[yStat]).filter(v => !isNaN(v));
            
            if (xValues.length === 0 || yValues.length === 0) {
                return <div className="loading">No data available for selected filters</div>;
            }

            const minX = Math.min(...xValues);
            const maxX = Math.max(...xValues);
            const minY = Math.min(...yValues);
            const maxY = Math.max(...yValues);

            const xRange = maxX - minX;
            const yRange = maxY - minY;
            const xMin = minX - xRange * 0.1;
            const xMax = maxX + xRange * 0.1;
            const yMin = minY - yRange * 0.1;
            const yMax = maxY + yRange * 0.1;

            const scaleX = (val) => ((val - xMin) / (xMax - xMin)) * chartWidth;
            const scaleY = (val) => chartHeight - ((val - yMin) / (yMax - yMin)) * chartHeight;
            
            const allBubbleValues = allHitters.map(d => d[bubbleStat]).filter(v => !isNaN(v) && v !== 0);
            const minBubble = Math.min(...allBubbleValues);
            const maxBubble = Math.max(...allBubbleValues);
            const scaleRadius = (val) => {
                if (isNaN(val) || val === 0) return 3;
                return 5 + ((val - minBubble) / (maxBubble - minBubble)) * 20;
            };

            const xTicks = [];
            const yTicks = [];
            for (let i = 0; i <= 10; i++) {
                xTicks.push(xMin + (xMax - xMin) * (i / 10));
                yTicks.push(yMin + (yMax - yMin) * (i / 10));
            }

            const handleMouseMove = (e, player) => {
                const svg = e.currentTarget.closest('svg');
                const rect = svg.getBoundingClientRect();
                setMousePos({ x: e.clientX - rect.left, y: e.clientY - rect.top });
                setHoveredPlayer(player);
            };

            return (
                <div className="chart-container">
                    <div className="header-row">
                        <div>
                            <h1>Baseball Hall of Fame Explorer</h1>
                            <p className="subtitle">View stats for all HOF batters</p>
                        </div>
                    </div>

                    <div className="tab-container">
                        <button 
                            className={`tab-button ${activeTab === 'chart' ? 'active' : ''}`}
                            onClick={() => setActiveTab('chart')}
                        >
                            Chart View
                        </button>
                        <button 
                            className={`tab-button ${activeTab === 'table' ? 'active' : ''}`}
                            onClick={() => setActiveTab('table')}
                        >
                            Table View
                        </button>
                    </div>

                    <div className="filters-section">
                        <div className="filters-row">
                            <div className="filter-box">
                                <label>X-Axis Stat</label>
                                <select value={xStat} onChange={(e) => setXStat(e.target.value)}>
                                    {Object.entries(hitterStats).map(([key, label]) => (
                                        <option key={key} value={key}>{label}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="filter-box">
                                <label>Y-Axis Stat</label>
                                <select value={yStat} onChange={(e) => setYStat(e.target.value)}>
                                    {Object.entries(hitterStats).map(([key, label]) => (
                                        <option key={key} value={key}>{label}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="filter-box">
                                <label>Bubble Size</label>
                                <select value={bubbleStat} onChange={(e) => setBubbleStat(e.target.value)}>
                                    {Object.entries(hitterStats).map(([key, label]) => (
                                        <option key={key} value={key}>{label}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="filter-box">
                                <label>Team</label>
                                <select 
                                    value={selectedTeam} 
                                    onChange={(e) => setSelectedTeam(e.target.value)}
                                    disabled={teams.length < 2}
                                >
                                    {teams.map(team => (
                                        <option key={team} value={team}>{team}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="filter-box">
                                <label>Position</label>
                                <select 
                                    value={selectedPosition} 
                                    onChange={(e) => setSelectedPosition(e.target.value)}
                                    disabled={positions.length < 2}
                                >
                                    {positions.map(pos => (
                                        <option key={pos} value={pos}>{pos}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="filter-box">
                                <label>Debut Year</label>
                                <div className="debut-filter">
                                    <select value={debutOperator} onChange={(e) => setDebutOperator(e.target.value)}>
                                        <option value=">">&gt;</option>
                                        <option value="<">&lt;</option>
                                        <option value="=">=</option>
                                    </select>
                                    <input 
                                        type="number" 
                                        value={debutYear} 
                                        onChange={(e) => setDebutYear(e.target.value)}
                                        placeholder="Year"
                                        min="1800"
                                        max="2025"
                                    />
                                </div>
                            </div>
                            <button className="reset-button" onClick={resetFilters}>
                                Reset Filters
                            </button>
                        </div>
                    </div>

                    <p className="player-count">
                        {data.length} players shown
                    </p>
                    
                    <div className="chart-wrapper">
                        <div className="chart-scroll">
                            <svg width={width} height={height}>
                                <g transform={`translate(${margin.left},${margin.top})`}>
                                    {xTicks.map((tick, i) => (
                                        <line key={`x-grid-${i}`} x1={scaleX(tick)} y1={0} x2={scaleX(tick)} y2={chartHeight} stroke="#e5e7eb" strokeWidth="1" />
                                    ))}
                                    {yTicks.map((tick, i) => (
                                        <line key={`y-grid-${i}`} x1={0} y1={scaleY(tick)} x2={chartWidth} y2={scaleY(tick)} stroke="#e5e7eb" strokeWidth="1" />
                                    ))}

                                    <line x1={0} y1={chartHeight} x2={chartWidth} y2={chartHeight} stroke="#374151" strokeWidth="2" />
                                    {xTicks.filter((_, i) => i % 2 === 0).map((tick, i) => (
                                        <g key={`x-tick-${i}`}>
                                            <line x1={scaleX(tick)} y1={chartHeight} x2={scaleX(tick)} y2={chartHeight + 6} stroke="#374151" strokeWidth="2" />
                                            <text x={scaleX(tick)} y={chartHeight + 20} textAnchor="middle" style={{fontSize: '12px', fill: '#4b5563'}}>{formatValue(tick)}</text>
                                        </g>
                                    ))}
                                    <text x={chartWidth / 2} y={chartHeight + 45} textAnchor="middle" style={{fontSize: '14px', fontWeight: '600', fill: '#1f2937'}}>
                                        {hitterStats[xStat]}
                                    </text>

                                    <line x1={0} y1={0} x2={0} y2={chartHeight} stroke="#374151" strokeWidth="2" />
                                    {yTicks.filter((_, i) => i % 2 === 0).map((tick, i) => (
                                        <g key={`y-tick-${i}`}>
                                            <line x1={0} y1={scaleY(tick)} x2={-6} y2={scaleY(tick)} stroke="#374151" strokeWidth="2" />
                                            <text x={-10} y={scaleY(tick)} textAnchor="end" dominantBaseline="middle" style={{fontSize: '12px', fill: '#4b5563'}}>{formatValue(tick)}</text>
                                        </g>
                                    ))}
                                    <text x={-45} y={chartHeight / 2} textAnchor="middle" transform={`rotate(-90, -45, ${chartHeight / 2})`} style={{fontSize: '14px', fontWeight: '600', fill: '#1f2937'}}>
                                        {hitterStats[yStat]}
                                    </text>

                                    {data.map((player, i) => {
                                        const xVal = player[xStat];
                                        const yVal = player[yStat];
                                        const bubbleVal = player[bubbleStat];
                                        
                                        if (isNaN(xVal) || isNaN(yVal)) return null;
                                        
                                        const x = scaleX(xVal);
                                        const y = scaleY(yVal);
                                        const r = scaleRadius(bubbleVal);
                                        const isHovered = hoveredPlayer?.Player === player.Player;

                                        return (
                                            <circle
                                                key={i}
                                                cx={x} cy={y} r={r}
                                                fill={isHovered ? "#2563eb" : "#3b82f6"}
                                                fillOpacity={isHovered ? 0.9 : 0.6}
                                                stroke={isHovered ? "#1e40af" : "#2563eb"}
                                                strokeWidth={isHovered ? 2 : 1}
                                                className="cursor-pointer"
                                                onMouseMove={(e) => handleMouseMove(e, player)}
                                                onMouseLeave={() => setHoveredPlayer(null)}
                                            />
                                        );
                                    })}
                                </g>
                            </svg>

                            {hoveredPlayer && (
                                <div className="tooltip" style={{ left: mousePos.x + 15, top: mousePos.y - 10 }}>
                                    <div className="tooltip-name">{hoveredPlayer.Player}</div>
                                    <div>Team: {hoveredPlayer.Team || 'N/A'}</div>
                                    <div>Position: {hoveredPlayer.Position || 'N/A'}</div>
                                    <div>Debut: {hoveredPlayer.DebutYear}</div>
                                    <div className="tooltip-section">
                                        <div>{hitterStats[bubbleStat]}: {formatValue(hoveredPlayer[bubbleStat])}</div>
                                        <div>{hitterStats[xStat]}: {formatValue(hoveredPlayer[xStat])}</div>
                                        <div>{hitterStats[yStat]}: {formatValue(hoveredPlayer[yStat])}</div>
                                    </div>
                                </div>
                            )}
                            
                            <div className="source">
                                Source: Baseball Reference
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<HOFExplorer />, document.getElementById('root'));
    </script>
</body>
</html>
